package manager;

import javax.persistence.EntityManager;

import model.Korisnik;
import model.Osoba;

public class OsobaManager {
	
	public static boolean newOsoba(String ime, String prezime, String username, String password, String drzava, String grad, String ulica, String godineStr) {
		EntityManager em = JPAUtil.getEntityManager();
		try {
			Integer godine = Integer.parseInt(godineStr);
			Korisnik korisnik = new Korisnik();
			korisnik.setUsername(username);
			korisnik.setPass(password);
			em.getTransaction().begin();
			em.persist(korisnik);
			em.flush();
			Osoba osoba = new Osoba();
			osoba.setAdresa(ulica);
			osoba.setDrzava(drzava);
			osoba.setGodine(godine);
			osoba.setGrad(grad);
			osoba.setIme(ime);
			osoba.setPrezime(prezime);
			osoba.setKorisnik(korisnik);
			osoba.setUloga("KUPAC");
			em.persist(osoba);
			em.getTransaction().commit();
			return true;
		}catch(Exception e) {
			return false;
		}
	}
	
	public static void main(String [] args) {
		System.out.println(newOsoba("Darko", "Grujic","dare", "dare123","BiH","Bijeljina","puskinova","24"));
	}
	
	
}
